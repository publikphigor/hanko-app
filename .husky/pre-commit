#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo 'ğŸ—ï¸ğŸ‘· Styling, testing and building your project before committing'

# Check staged files for formatting and linting errors.
npx lint-staged --concurrent false || 
(
        echo 'âŒâŒâŒ Errors, were found in your staged file(s), make the changes requested above. âŒâŒâŒ'
        false;
)

# If the above is success, try running a build.
echo 'ğŸ‘·â€â™‚ï¸ğŸ”¨ Ok, trying to build... ğŸ‘·â€â™‚ï¸ğŸ”¨'

npm run build || 
(
        echo 'âŒğŸ‘·â€â™‚ï¸ğŸ”¨âŒ Failed to build, please run "npm run build" and fixed the errors in the terminal. âŒğŸ‘·â€â™‚ï¸ğŸ”¨âŒ'
        false;
)

# If it builds, commit changes.
echo 'âœ…âœ…âœ…âœ… Committing this now. âœ…âœ…âœ…âœ…'
